
<div class="bar-card-show p-3 m-3">
<div class="container">
  <h1>Vos r√©servations</h1>
  <table class="table table-hover">
    <thead>
      <tr>
        <th scope="col"></th>
        <th scope="col">Promotion</th>
        <th scope="col">Bar</th>
        <th scope="col">D√©but <%= link_to '‚ñ≥', :sort => "start-asc" %> <%= link_to '‚ñΩ', :sort => "start-desc" %> </th>
        <th scope="col">Fin <%= link_to '‚ñ≥', :sort => "end-asc" %> <%= link_to '‚ñΩ', :sort => "end-desc" %></th>
        <th scope="col">QR CODE</th>
        <th scope="col">Status</th>
        <th scope="col">Annuler</th>
        <th scope="col">Commenter</th>
      </tr>
    </thead>
    <tbody>
      <% @bookings.each_with_index do |booking, index| %>
        <tr>
          <th scope="row"></th>
          <td><%= booking.promotion.name%></td>
          <td><%= link_to booking.promotion.bar.name, bar_path(booking.promotion.bar)%></td>
          <td><%= booking.promotion.start_date.strftime("%d/%m/%y")%></td>
          <td><%= booking.promotion.end_date.strftime("%d/%m/%y")%></td>
          <td><button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#qr-modal-<%= booking.id%>">
          Launch demo modal</button></td>
            <% if booking.used? %>
              <td><%= booking.qr_progress_labels[booking.qr_progress.to_sym]%></td>
            <% elsif  Date.today > booking.promotion.end_date %>
                <%booking.expired! %>

              <td><%= booking.qr_progress_labels[booking.qr_progress.to_sym] %></td>
            <% else %>
              <% booking.pending! %>
              <td><%= booking.qr_progress_labels[booking.qr_progress.to_sym] %></td>
            <% end %>
          <td><%= link_to 'üóë', booking_path(booking), data: {turbo_method: :delete, turbo_confirm: "√™tes-vous s√ªr?"}  %></td>
          <td><%= link_to 'üìù', new_booking_review_path(booking)  %></td>
        </tr>
<div class="modal fade" id="qr-modal-<%= booking.id%>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <%= @qr_codes[index].html_safe %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
      <% end %>
    </tbody>
  </table>
</div>
</div>
